"use strict";(self.webpackChunkgemis=self.webpackChunkgemis||[]).push([[808],{5808:(J,Z,u)=>{u.r(Z),u.d(Z,{ManufacturaModule:()=>y});var d=u(8583),m=u(4330),s=u(8239),a=u(665),e=u(7716),g=u(7270),p=u(8347);function f(o,n){if(1&o&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t.descripcion)}}function h(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",19),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6,"-"),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"button",20),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().asignarActividad(l.id)}),e._uU(9," Agregar actividades "),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.descripcion)}}let A=(()=>{class o{constructor(t,r,i,l){this.fb=t,this.articulosService=r,this.manufacturaService=i,this.router=l,this.articulos=[],this.planes=[],this.PlanFormGroup=this.fb.group({articulo:[null,[a.kI.required]]})}ngOnInit(){this.obtenerArticulos(),this.obtenerPlanes()}obtenerArticulos(){var t=this;return(0,s.Z)(function*(){t.articulos=yield t.articulosService.ObtenerArticulosPromise()})()}obtenerPlanes(){var t=this;return(0,s.Z)(function*(){t.planes=yield t.manufacturaService.obtenerPlanes()})()}crearPlan(){var t=this;return(0,s.Z)(function*(){if(t.PlanFormGroup.valid){const r=t.PlanFormGroup.value.articulo,i={descripcion:r.descripcion,articuloId:r.id},l=yield t.manufacturaService.generarPlan(i);console.log(l),t.obtenerPlanes()}})()}asignarActividad(t){this.router.navigate(["/manufactura/plan-detalle/",t])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(g.N),e.Y36(p.f),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-plan"]],decls:34,vars:4,consts:[[1,"container","mt-3"],[1,"custom-card"],[1,"custom-card-body"],[1,"text-center","mb-3"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","exampleInputUsername1",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],[1,"input-group"],["formControlName","articulo",1,"form-control"],["selected","","disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"custom-card","mt-4"],[1,"text-center","mt-2"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngValue"],["scope","row"],[1,"btn","btn-secondary",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h5",3),e._uU(4,"Crear Plan"),e.qZA(),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return r.crearPlan()}),e.TgZ(6,"div",5),e.TgZ(7,"label",6),e._uU(8,"Articulo"),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"select",9),e.TgZ(12,"option",10),e._uU(13,"Selecciona articulo"),e.qZA(),e.YNc(14,f,2,2,"option",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"button",12),e.NdJ("click",function(){return r.crearPlan()}),e._uU(16,"Crear Plan"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"h5",14),e._uU(19,"Planes"),e.qZA(),e.TgZ(20,"div",2),e.TgZ(21,"table",15),e.TgZ(22,"thead"),e.TgZ(23,"tr"),e.TgZ(24,"th",16),e._uU(25,"Id"),e.qZA(),e.TgZ(26,"th",16),e._uU(27,"Descripcion"),e.qZA(),e.TgZ(28,"th",16),e._uU(29,"opciones"),e.qZA(),e.TgZ(30,"th",16),e._uU(31,"actividades"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"tbody"),e.YNc(33,h,10,2,"tr",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",r.PlanFormGroup),e.xp6(7),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",r.articulos),e.xp6(19),e.Q6J("ngForOf",r.planes))},directives:[a._Y,a.JL,a.sg,a.EJ,a.JJ,a.u,a.YN,a.Kr,d.sg],styles:[""]}),o})();var T=u(6646),q=u(5323);function _(o,n){if(1&o&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.descripcion)}}function v(o,n){if(1&o&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.material_desripcion)}}function b(o,n){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",25),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.qZA()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.plan_actividad),e.xp6(2),e.Oqu(t.plan_hhombre),e.xp6(2),e.Oqu(t.materiale.material_desripcion),e.xp6(2),e.Oqu(t.material_cantidad),e.xp6(2),e.Oqu(t.departamento.descripcion)}}let C=(()=>{class o{constructor(t,r,i,l,c){this.route=t,this.fb=r,this.departamentosService=i,this.materialesService=l,this.manufacturaService=c,this.materiales=[],this.departamentos=[],this.planesDetalle=[];const D=this.route.snapshot.paramMap.get("id");this.PlanDetalleFormGroup=this.fb.group({planId:[D],materialId:[null,[a.kI.required]],departamentoId:[null,[a.kI.required]],material_cantidad:[null,[a.kI.required]],plan_hhombre:[null,[a.kI.required]],plan_actividad:[null,[a.kI.required]]})}ngOnInit(){this.obtenerMateriales(),this.obtenerDepartamentos(),this.obtenerPlanesDetalle(this.PlanDetalleFormGroup.value.planId)}obtenerMateriales(){var t=this;return(0,s.Z)(function*(){t.materiales=yield t.materialesService.ObtenerMaterialesPromise()})()}obtenerDepartamentos(){var t=this;return(0,s.Z)(function*(){t.departamentos=yield t.departamentosService.ObtenerDepartamentosPromise()})()}obtenerPlanesDetalle(t){var r=this;return(0,s.Z)(function*(){t=r.PlanDetalleFormGroup.value.planId,r.planesDetalle=yield r.manufacturaService.obtenerPlanDetalle(t),console.log("este es el arreglo de la consulta de PlAN DETALLE",r.planesDetalle)})()}agregarActividad(){var t=this;return(0,s.Z)(function*(){if(t.PlanDetalleFormGroup.valid){const r=yield t.manufacturaService.generarPlanDetalle(t.PlanDetalleFormGroup.value);console.log(r),t.obtenerPlanesDetalle(t.PlanDetalleFormGroup.value.planId)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.gz),e.Y36(a.qu),e.Y36(T.r),e.Y36(q.D),e.Y36(p.f))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-plan-detalle"]],decls:63,vars:6,consts:[[1,"container","mt-3"],[1,"custom-card"],[1,"custom-card-body"],[1,"text-center","mb-3"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","exampleInputUsername1",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","formControlName","plan_actividad","placeholder","Plan actividad",1,"form-control"],["type","number","formControlName","plan_hhombre","placeholder","Numero de horas hombre",1,"form-control"],[1,"input-group"],["formControlName","departamentoId",1,"form-control"],["selected","","disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-6","row"],["formControlName","materialId",1,"form-control"],["for","exampleInputUsername2",1,"col-sm-3","col-form-label"],["type","number","formControlName","material_cantidad","placeholder","Cantidad de material",1,"form-control"],[1,"btn","btn-primary",3,"click"],[1,"custom-card","mt-4"],[1,"text-center","mt-2"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngValue"],["scope","row"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h5",3),e._uU(4,"Agregar actvidad a plan"),e.qZA(),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return r.agregarActividad()}),e.TgZ(6,"div",5),e.TgZ(7,"label",6),e._uU(8,"Nombre de actividad"),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.qZA(),e.qZA(),e.TgZ(11,"div",5),e.TgZ(12,"label",6),e._uU(13,"Horas hombre"),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"input",9),e.qZA(),e.qZA(),e.TgZ(16,"div",5),e.TgZ(17,"label",6),e._uU(18,"Departamento"),e.qZA(),e.TgZ(19,"div",7),e.TgZ(20,"div",10),e.TgZ(21,"select",11),e.TgZ(22,"option",12),e._uU(23,"Selecciona departamento"),e.qZA(),e.YNc(24,_,2,2,"option",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",5),e.TgZ(26,"div",14),e.TgZ(27,"label",6),e._uU(28,"Material"),e.qZA(),e.TgZ(29,"div",7),e.TgZ(30,"div",10),e.TgZ(31,"select",15),e.TgZ(32,"option",12),e._uU(33,"Selecciona material"),e.qZA(),e.YNc(34,v,2,2,"option",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",14),e.TgZ(36,"label",16),e._uU(37,"Cantidad"),e.qZA(),e.TgZ(38,"div",7),e._UZ(39,"input",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"button",18),e.NdJ("click",function(){return r.agregarActividad()}),e._uU(41,"Crear Plan"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",19),e.TgZ(43,"h5",20),e._uU(44,"Actividades de "),e.qZA(),e.TgZ(45,"div",2),e.TgZ(46,"table",21),e.TgZ(47,"thead"),e.TgZ(48,"tr"),e.TgZ(49,"th",22),e._uU(50,"Id"),e.qZA(),e.TgZ(51,"th",22),e._uU(52,"Actividad"),e.qZA(),e.TgZ(53,"th",22),e._uU(54,"Horas hombre"),e.qZA(),e.TgZ(55,"th",22),e._uU(56,"Material"),e.qZA(),e.TgZ(57,"th",22),e._uU(58,"Cantidad"),e.qZA(),e.TgZ(59,"th",22),e._uU(60,"Departamento"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"tbody"),e.YNc(62,b,13,6,"tr",23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",r.PlanDetalleFormGroup),e.xp6(17),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",r.departamentos),e.xp6(8),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",r.materiales),e.xp6(28),e.Q6J("ngForOf",r.planesDetalle))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.wV,a.EJ,a.YN,a.Kr,d.sg],styles:[""]}),o})();var U=u(5772),F=u(5693);let P=(()=>{class o{transform(t,r){return r?t.filter(i=>this.filterBy(i,r)):t}filterBy(t,r){return Object.keys(t).reduce((l,c)=>this.reduceKeys(l,c,t),"").toLocaleLowerCase().indexOf(r.toLocaleLowerCase())>-1}reduceKeys(t,r,i){return this.isProp(r)&&(t=`${t}$${i[r]}`),t}isProp(t){return t.includes("ordentrabajoId")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"ordendetalleFiler",type:o,pure:!0}),o})();function O(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td",11),e.TgZ(16,"img",12),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return[c.idlinea=l.id,c.Actulaiza_actividad()]}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.ordentrabajoId),e.xp6(2),e.Oqu(t.departamento.descripcion),e.xp6(2),e.Oqu(t.ordendeta_actividad),e.xp6(2),e.Oqu(t.ordendeta_hhombre),e.xp6(2),e.Oqu(t.ordendeta_cantidad),e.xp6(2),e.Oqu(t.ordendeta_hhombre*t.ordendeta_cantidad)}}const x=[{path:"plan",component:A},{path:"plan-detalle/:id",component:C},{path:"cofirmatrabajo",component:(()=>{class o{constructor(t,r,i,l,c){this.fb=t,this.conexion=i,this.conexion3=l,this.modalService=c,this.Ordenesconfirmar=[],this.Articuloslincatego=[],this.Lineas=[],this.Categorias=[],this.seleccionado="Elije una linea",this.idlinea=0,this.search="",this.ConfirmaFormGroup=this.fb.group({}),this.modal=this.fb.group({id:[""]}),this.crearFormulario(),this.cargarDataAlFormulario()}obtenerOrdenesconfirmar(){var t=this;return(0,s.Z)(function*(){t.Ordenesconfirmar=yield t.conexion.obtenerOrdenestrabajo_cofirmar(),console.log(t.Ordenesconfirmar)})()}ngOnInit(){this.obtenerOrdenesconfirmar()}get claveNoValido(){var t,r;return(null===(t=this.ConfirmaFormGroup.get("clave"))||void 0===t?void 0:t.invalid)&&(null===(r=this.ConfirmaFormGroup.get("clave"))||void 0===r?void 0:r.touched)}get descripNoValido(){var t,r;return(null===(t=this.ConfirmaFormGroup.get("descripcion"))||void 0===t?void 0:t.invalid)&&(null===(r=this.ConfirmaFormGroup.get("descripcion"))||void 0===r?void 0:r.touched)}crearFormulario(){this.ConfirmaFormGroup=this.fb.group({})}cargarDataAlFormulario(){this.ConfirmaFormGroup.reset({})}guardar(){}Actulaiza_actividad(){console.log("valores del formgruopos",this.ConfirmaFormGroup.value),this.conexion.Actulaiza_Actividaddetalle(this.idlinea).subscribe(t=>{t.ok&&(console.log("cambiado"),console.log("valores del formgruopos",this.ConfirmaFormGroup.value)),this.ConfirmaFormGroup.reset(),this.obtenerOrdenesconfirmar()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(m.gz),e.Y36(p.f),e.Y36(U.g),e.Y36(F.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-confirmatrabajo"]],decls:45,vars:11,consts:[[1,"text-center","mt-2"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","mt-5","mb-3"],[1,"col-md-12"],["for","ciudad",1,"col-form-label"],["type","text","id","searchForm","placeholder","Busca aqui...",1,"form-control","rounded-sm",3,"ngModel","ngModelChange"],[1,"container","mt-3"],[1,"row"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"],["src","/assets/imagenes/LAPIZ.png","width","20px","data-toggle","modal","data-target","#exampleModal",2,"cursor","pointer",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1,"confirmatrabajo works!"),e.qZA(),e.TgZ(2,"div",0),e.TgZ(3,"h2"),e._uU(4,"Confirmacion de Actividades por Ordenes de Trabajo"),e.qZA(),e.qZA(),e.TgZ(5,"form",1),e.NdJ("ngSubmit",function(){return r.guardar()}),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"div",3),e.TgZ(8,"label",4),e._uU(9,"Buscar Orden para confirmar actividades.."),e.qZA(),e.qZA(),e.TgZ(10,"div",3),e.TgZ(11,"input",5),e.NdJ("ngModelChange",function(l){return r.search=l}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",6),e.TgZ(13,"div",7),e.TgZ(14,"div",3),e.TgZ(15,"table",8),e.TgZ(16,"thead"),e.TgZ(17,"tr"),e.TgZ(18,"th",9),e._uU(19,"Id"),e.qZA(),e.TgZ(20,"th",9),e._uU(21,"Orden"),e.qZA(),e.TgZ(22,"th",9),e._uU(23,"Departamento"),e.qZA(),e.TgZ(24,"th",9),e._uU(25,"Actividad"),e.qZA(),e.TgZ(26,"th",9),e._uU(27,"HHombre"),e.qZA(),e.TgZ(28,"th",9),e._uU(29,"Cantidad"),e.qZA(),e.TgZ(30,"th",9),e._uU(31,"Total HHombre"),e.qZA(),e.TgZ(32,"th",9),e._uU(33,"Confirmar Tiempo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"tbody"),e.YNc(35,O,17,7,"tr",10),e.ALo(36,"ordendetalleFiler"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(37,"hr"),e.TgZ(38,"pre"),e._uU(39),e._UZ(40,"br"),e._uU(41),e.qZA(),e.TgZ(42,"pre"),e._uU(43),e.ALo(44,"json"),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",r.ConfirmaFormGroup),e.xp6(6),e.Q6J("ngModel",r.search),e.xp6(24),e.Q6J("ngForOf",e.xi3(36,6,r.Ordenesconfirmar,r.search)),e.xp6(4),e.hij("      Estado del formulario: ",r.ConfirmaFormGroup.valid,"\n      "),e.xp6(2),e.hij("\n      Status: ",r.ConfirmaFormGroup.status,"\n    "),e.xp6(2),e.hij("    \n      ",e.lcZ(44,9,r.ConfirmaFormGroup.value),"\n    \n    "))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.On,d.sg],pipes:[P,d.Ts],styles:[""]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,m.Bz.forChild(x),a.u5,a.UX]]}),o})()}}]);